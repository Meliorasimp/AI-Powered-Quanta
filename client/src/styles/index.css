/* Tailwind v4 core imports */
@import "tailwindcss/preflight";
@import "tailwindcss/theme";
@import "tailwindcss/utilities";

/* ================= Base Layer ================= */
@layer base {
  * {
    padding: 0;
    margin: 0;
    box-sizing: border-box;
  }
  :root {
    font-family: "Inter", sans-serif;
    --primary-background-color: #13013f;
    --second-primary-background-color: #040020;
    --dark-background-color: #1d1d1d;
    --second-dark-background-color: #242424;
    --light-background-color: #f7f7f7;
    --second-light-background-color: #e9e9e9;
    --budget-card-color: #220077;
    --dark-budget-card-color: #3b3b3b;
    --light-text-color: #3b3b3b;
    --dark-text-color: #ffffff;
    --primary-landingpage-bgcolor: #131313;
    --statcard-purple-bgcolor: #1d004b;
    --statcard-purple-textcolor: white;
    --statcard-dark-bgcolor: #3b3b3b;
    --statcard-dark-textcolor: white;
    --statcard-light-bgcolor: #f7f7f7;
    --statcard-light-textcolor: var(--light-text-color);
  }
  html {
    scroll-behavior: smooth;
  }
  /* Anchor offset helper so fixed navbar doesn't cover target sections */
  .anchor-offset {
    scroll-margin-top: 120px; /* accommodates fixed nav height */
  }
  .app {
    transition: background-color 0.2s linear;
    min-height: 100vh;
  }
  .app.purple {
    background: var(--second-primary-background-color);
    color: var(--dark-text-color);
  }
  .app.dark {
    background: var(--second-dark-background-color);
    color: var(--dark-text-color);
  }
  .app.light {
    background: var(--second-light-background-color);
    color: var(--light-text-color);
  }
  .navbar.purple {
    background: var(--primary-background-color);
  }
  .navbar.dark {
    background: var(--dark-background-color);
  }
  .navbar.light {
    background: var(--light-background-color);
  }
  .budget-card.purple {
    background: var(--budget-card-color);
    color: #e2e2e2;
    border-radius: 10px;
  }
  .budget-card.dark {
    background: var(--dark-budget-card-color);
    color: #e2e2e2;
    border-radius: 10px;
  }
  .budget-card.light {
    background: var(--light-background-color);
    color: var(--light-text-color);
    border-radius: 10px;
  }
  .landing-page-background-color {
    background: var(--primary-landingpage-bgcolor);
    color: var(--dark-text-color);
  }
  /* Enhanced gradient / ambient version (non-destructive: opt-in) */
  .landing-page-enhanced-bg {
    background: radial-gradient(
        circle at 18% 22%,
        rgba(99, 102, 241, 0.18),
        transparent 55%
      ),
      radial-gradient(
        circle at 82% 70%,
        rgba(236, 72, 153, 0.16),
        transparent 60%
      ),
      linear-gradient(135deg, #0d0d11 0%, #111827 45%, #0f0f17 100%);
    /* Subtle vignette */
    position: relative;
  }
  .landing-page-enhanced-bg::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: radial-gradient(
        circle at 50% 120%,
        rgba(255, 255, 255, 0.05),
        transparent 70%
      ),
      linear-gradient(to top, rgba(0, 0, 0, 0.35), transparent 35%);
    mix-blend-mode: normal;
  }
  .slider {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 8px;
    border-radius: 5px;
    background: #ddd;
    outline: none;
    opacity: 0.9;
    transition: opacity 0.2s;
  }
  .slider:hover {
    opacity: 1;
  }

  /* Track (WebKit browsers) */
  .slider::-webkit-slider-runnable-track {
    height: 16px;
    border-radius: 50px;
    background: linear-gradient(to right, #14e002, #81ff7d);
  }

  /* Thumb (WebKit browsers) */
  .slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #2196f3;
    cursor: pointer;
    border: 2px solid white;
    margin-top: -2px; /* centers thumb on 16px track */
    transition: background 0.3s;
  }

  .slider::-webkit-slider-thumb:hover {
    background: #1976d2;
  }

  /* Floating ambient orbs for aesthetic depth */
  .lp-orb {
    position: absolute;
    width: 380px;
    height: 380px;
    border-radius: 50%;
    filter: blur(70px) saturate(160%);
    opacity: 0.28;
    mix-blend-mode: screen;
    animation: orbFloat 18s linear infinite;
  }
  .lp-orb.orb-green {
    background: radial-gradient(
      circle at 30% 30%,
      #10b981,
      #065f46 60%,
      transparent 75%
    );
  }
  .lp-orb.orb-pink {
    background: radial-gradient(
      circle at 35% 40%,
      #ec4899,
      #7e194d 60%,
      transparent 75%
    );
    animation-duration: 22s;
  }
  .lp-orb.orb-indigo {
    background: radial-gradient(
      circle at 45% 35%,
      #6366f1,
      #312e81 60%,
      transparent 75%
    );
    animation-duration: 26s;
  }
  @keyframes orbFloat {
    0% {
      transform: translate3d(0, 0, 0) scale(1);
    }
    25% {
      transform: translate3d(60px, -40px, 0) scale(1.05);
    }
    50% {
      transform: translate3d(-40px, 35px, 0) scale(0.95);
    }
    75% {
      transform: translate3d(70px, 50px, 0) scale(1.08);
    }
    100% {
      transform: translate3d(0, 0, 0) scale(1);
    }
  }
  /* Shimmer divider */
  .gradient-divider {
    position: relative;
    height: 2px;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(16, 185, 129, 0.6),
      transparent
    );
    overflow: hidden;
  }
  .gradient-divider::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, transparent, #ffffff, transparent);
    width: 40%;
    animation: dividerShimmer 4.5s ease-in-out infinite;
    opacity: 0.65;
  }
  @keyframes dividerShimmer {
    0% {
      transform: translateX(-100%);
    }
    50% {
      transform: translateX(160%);
    }
    100% {
      transform: translateX(160%);
    }
  }
  /* Soft pulse ring (used behind icons) */
  .pulse-ring {
    position: relative;
  }
  .pulse-ring::after {
    content: "";
    position: absolute;
    inset: -6px;
    border-radius: 50%;
    background: radial-gradient(
      circle at 50% 50%,
      rgba(16, 185, 129, 0.5),
      transparent 70%
    );
    animation: pulseRing 3.2s ease-in-out infinite;
    opacity: 0.6;
    pointer-events: none;
  }
  @keyframes pulseRing {
    0%,
    100% {
      transform: scale(0.9);
      opacity: 0.55;
    }
    50% {
      transform: scale(1.15);
      opacity: 0.85;
    }
  }
  /* Fade up utility (progressive reveal) */
  .fade-up {
    opacity: 0;
    transform: translateY(14px);
    animation: fadeUp 0.85s ease forwards;
  }
  @keyframes fadeUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .glow-text-white {
    color: #fff;
    text-shadow: 0 0 5px #fff;
  }
  .statcard-purple {
    background: var(--statcard-purple-bgcolor);
    color: var(--statcard-purple-textcolor);
  }
  .cell-slide {
    position: relative;
    overflow: hidden;
    background: #fff;
    transition: background-color 0.4s ease;
  }
  .cell-slide::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: #f3f4f6;
    transition: transform 0.4s ease;
    z-index: 0;
  }
  .cell-slide:hover::before {
    transform: translateX(100%);
  }
  .text-glow-green {
    filter: drop-shadow(0 0 1px lightgreen);
  }
  .ai-modal-background {
    background: #150752;
  }
  .ai-modal-header {
    background: #0b0136;
  }
  .bar-container {
    width: 100%;
    height: 20px;
    display: flex;
    overflow: hidden;
    border-radius: 9999px;
    background: #00ff00;
  }
  .expense-bar-fill {
    height: 100%;
    background: linear-gradient(to right, #ff0000, #ff016b);
    transition: width 0.3s ease;
  }
  .budget-bar-fill {
    height: 100%;
    background: linear-gradient(to right, #9900ff, #4100f5);
    transition: width 0.3s ease;
  }
  .transfers-bar-fill {
    height: 100%;
    background: linear-gradient(to right, #00d2ff, #3a7bd5);
    transition: width 0.3s ease;
  }
}

/* ================= Utilities Layer ================= */
@layer utilities {
  .w-10\/11 {
    width: 90.9090909%;
  }
  .w-3\/11 {
    width: 27.2727273%;
  }
  .w-4\/11 {
    width: 36.3636364%;
  }
  .w-2\/7 {
    width: 28.5714286%;
  }
}

/* ================= Components Layer ================= */
@layer components {
  .badge {
    @apply inline-flex items-center px-2 py-0.5 rounded-full text-[10px] sm:text-xs font-medium tracking-wide uppercase gap-1 shadow-sm;
    letter-spacing: 0.5px;
  }
  .badge-income {
    background: linear-gradient(to right, #064e3b, #059669);
    @apply text-white;
  }
  .badge-expense {
    background: linear-gradient(to right, #7f1d1d, #dc2626);
    @apply text-white;
  }
  .badge-transfer {
    background: linear-gradient(to right, #1e3a8a, #2563eb);
    @apply text-white;
  }
  .badge-pending {
    background: linear-gradient(to right, #78350f, #f59e0b);
    @apply text-white;
  }
  .badge-cleared {
    background: linear-gradient(to right, #065f46, #10b981);
    @apply text-white;
  }
  .table-container-card {
    @apply rounded-xl border border-white/10 dark:border-white/10 backdrop-blur-sm shadow-md overflow-hidden;
    background: linear-gradient(
      125deg,
      rgba(255, 255, 255, 0.04),
      rgba(255, 255, 255, 0)
    );
  }
  .table-header-gradient {
    background: linear-gradient(90deg, #0f0445, #2d0a87);
  }
  .row-hover-surface {
    position: relative;
  }
  .row-hover-surface::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.08),
      rgba(255, 255, 255, 0)
    );
    opacity: 0;
    transition: opacity 0.25s ease;
    pointer-events: none;
  }
  .row-hover-surface:hover::after {
    opacity: 1;
  }
  .card-surface {
    @apply relative rounded-xl border border-white/10 bg-white/5 backdrop-blur-sm p-5 sm:p-6 shadow-md overflow-hidden;
  }
  .card-surface::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: radial-gradient(
      circle at 20% 15%,
      rgba(255, 255, 255, 0.15),
      transparent 60%
    );
  }
  .card-header {
    @apply flex items-start justify-between mb-4;
  }
  .section-title {
    @apply text-sm font-semibold uppercase tracking-wide opacity-80 mb-1;
  }
  .input-grid {
    @apply grid gap-4 sm:grid-cols-2;
  }
  .input-field {
    @apply w-full rounded-md border border-white/20 bg-white/10 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/60 focus:border-indigo-400 transition;
  }
  .action-bar {
    @apply flex gap-3 flex-wrap mt-4;
  }
  .gradient-btn-primary {
    @apply bg-gradient-to-r from-indigo-500 via-fuchsia-500 to-violet-600 text-white font-medium px-5 py-2 rounded-md shadow hover:shadow-lg hover:scale-[1.02] active:scale-95 transition-all duration-150 border border-white/10;
  }
  .danger-outline {
    @apply border border-red-400/40 text-red-300 hover:bg-red-500/10 rounded-md px-5 py-2 font-medium transition;
  }
  .avatar-ring {
    @apply relative rounded-full overflow-hidden shadow-inner ring-2 ring-white/20;
  }
  .avatar-ring img {
    @apply w-full h-full object-cover;
  }
  .inline-badge {
    @apply inline-block text-[11px] font-medium px-2 py-0.5 rounded-md bg-white/10 border border-white/10 backdrop-blur-sm;
  }
  .empty-state-box {
    @apply border border-dashed border-white/20 rounded-lg p-8 text-center text-sm sm:text-base;
    background: radial-gradient(
      circle at 30% 20%,
      rgba(255, 255, 255, 0.08),
      rgba(255, 255, 255, 0)
    );
  }
  .budget-card-shell {
    @apply relative rounded-xl p-5 flex flex-col gap-4 shadow-md border border-white/10 overflow-hidden;
    background: linear-gradient(
      145deg,
      rgba(255, 255, 255, 0.07),
      rgba(255, 255, 255, 0.02)
    );
  }
  .budget-card-shell::before {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(
      circle at 15% 20%,
      rgba(255, 255, 255, 0.18),
      transparent 60%
    );
    opacity: 0.55;
    pointer-events: none;
  }
  .budget-card-shell:hover {
    box-shadow: 0 4px 18px -2px rgba(0, 0, 0, 0.4),
      0 0 0 1px rgba(255, 255, 255, 0.08) inset;
  }
  .budget-card-header {
    @apply flex flex-col gap-1;
  }
  .budget-meta {
    @apply flex flex-wrap gap-x-6 gap-y-1 text-[11px] sm:text-xs opacity-80 font-medium;
  }
  .budget-progress {
    @apply w-full h-3 rounded-full overflow-hidden relative bg-white/10;
    backdrop-filter: blur(4px);
  }
  .budget-progress-fill {
    @apply h-full rounded-full transition-all duration-500 ease-out;
    background: linear-gradient(90deg, #10b981, #059669, #047857);
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.15) inset,
      0 2px 6px -1px rgba(0, 0, 0, 0.5);
  }
  .budget-progress-label {
    @apply absolute inset-0 flex items-center justify-center text-[10px] sm:text-[11px] font-semibold tracking-wide text-white/90 drop-shadow;
    mix-blend-mode: screen;
  }
}
